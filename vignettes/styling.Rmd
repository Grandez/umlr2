---
title: "Estilos de diagramas"
output: 
  html_document:
      number_sections: true
vignette: >
  %\VignetteIndexEntry{Estilos de diagramas}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo=FALSE}
library(UMLR2)
umlr = UMLR$new(plantuml="C:\\SDK\\plantuml\\plantuml.jar")
source("sampleClasses.R")
```

PlantUML permite un cierto grado de configuración a nivel de fuentes y colores a través del comando _skinparam_. En el paquete se denominan **estilos**.

La documentación actualizada sobre este comando esta disponible en [PlantUML skinparam](https://plantuml.com/es/skinparam)

Por defecto no se aplica ningún estilo, con lo que el diagrama se generará de acuerdo con las especificaciones por defecto en cada version del paquete.

# Estilos predefinidos

**`r .Options$pkgName`** proporciona los siguientes estilos predefinidos:
```{r, echo=FALSE}
root = system.file("extdata", package = "UMLR2")
lista = list.files(root, pattern="*.sty")
styFiles = gsub("\\.sty$","", lista)
```

`r paste("-", styFiles, collapse="\n")`

```{r docStyles, echo=FALSE}
LEVEL=2  # Siguiente nivel
txtLevel = paste0(rep("#", LEVEL), collapse="")

macros = function(data) {
  for (idx in seq(1, length(data))) {
    patterns = c(txtLevel, names(data[idx]))
    keys = paste0("__", c("level", "title"), "__")
    res = data[[idx]]
    for (idxp in seq(1, length(keys))) {
      res = gsub(keys[idxp], patterns[idxp], res)
    }
    data[[idx]] = res
  }
  data
}
missingDoc = function(styles) {
  titles = paste(txtLevel, styles)
  c(paste(titles, "To Do\n", sep="\n"))
}


chkFiles = unlist(lapply(styFiles,    function(x) file.exists(file.path(root, paste0(x, ".Rmd")))))
txtFiles = lapply(styFiles[chkFiles], function(x) readLines(file.path(root, paste0(x, ".Rmd"))))
names(txtFiles) = styFiles[chkFiles]
styInfo = macros(txtFiles)
styDetail = unlist(styInfo)
styMissing = missingDoc(styFiles[!chkFiles])
```

`r paste(styDetail,  collapse="\n")`


otra cosa 


`r paste(styMissing, collapse="\n")`
